@Scheduled(cron = "0 * * * * *")  // ë§¤ë¶„ 0ì´ˆì— ì‹¤í–‰
    public void checkSchedules() {
        System.out.println("â° ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ë¨: " + LocalDateTime.now());
        LocalDateTime now = LocalDateTime.now().withSecond(0).withNano(0);
        List<ScheduleEntity> dueSchedules = repository.findByNotifiedFalse();

        for (ScheduleEntity schedule : dueSchedules) {
            try {
                LocalTime time = LocalTime.parse(schedule.getTime());
                LocalDate date = schedule.getDate();
                LocalDateTime scheduleTime = LocalDateTime.of(date, time);
                if(scheduleTime.equals(now)) {
                    String message = "ğŸ”” ì§€ê¸ˆ '" + schedule.getTitle() + "' ì¼ì • ì‹œê°„ì´ì—ìš”! ğŸ’ª";


                    if (messagingTemplate != null) {
                        messagingTemplate.convertAndSend("/topic/notification/" + schedule.getNickname(), message);
                        System.out.println("âœ… ì•Œë¦¼ ì „ì†¡ ì„±ê³µ: " + message);
                        messagingTemplate.convertAndSend(
                                "/topic/notification",
                                "ì§€ê¸ˆì€ ê³„íšëœ ì¼ì • ì‹œê°„ì…ë‹ˆë‹¤!"
                        );
                    } else {
                        System.out.println("âŒ messagingTemplateì´ nullì…ë‹ˆë‹¤!!!");
                    }
                    // ì„ íƒ: ì•Œë¦¼ ë³´ë‚¸ ì¼ì •ì€ ìƒíƒœ ì—…ë°ì´íŠ¸ (ì´ë¯¸ ì•Œë¦¼ ë³´ëƒˆë‹¤ê³  í‘œì‹œ)
                    schedule.setNotified(true);
                    repository.save(schedule);
                }
            } catch (Exception e) {
                System.out.println("âŒ ë‚ ì§œ íŒŒì‹± ì‹¤íŒ¨: " + schedule.getStartTime());
            }

        }
    }
